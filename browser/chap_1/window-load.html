<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!--HTML 전부다 파싱되고 Contentloaded 발생전에 실행-->
    <script src="test.js" defer></script>
</head>
<body>
    <script>
        //only document
        window.addEventListener('DOMContentLoaded',() => {
            console.log('DOMContentLoaded');
        });

        //after resource (css, images)
        window.addEventListener('load',() => {
            console.log('load');
        });

        // before unload (페이지가 끝날때, 사용자가 페이지를 나가기 전에)
        window.addEventListener('beforeunload',() => {
            console.log('beforeunload');
        });

        // resource is being unloaded(리소스같은 애들이 다 언로드 되었을때)
        window.addEventListener('unload',() => {
            console.log('unload');
        });

        /*
            DOMContentLoaded – 브라우저가 HTML을 전부 읽고 DOM 트리를 완성하는 즉시 발생합니다. 이미지 파일(<img>)이나 스타일시트 등의 기타 자원은 기다리지 않습니다.
            load – HTML로 DOM 트리를 만드는 게 완성되었을 뿐만 아니라 이미지, 스타일시트 같은 외부 자원도 모두 불러오는 것이 끝났을 때 발생합니다.
            beforeunload/unload – 사용자가 페이지를 떠날 때 발생합니다.
            세 이벤트는 다음과 같은 상황에서 활용할 수 있습니다.

            DOMContentLoaded – DOM이 준비된 것을 확인한 후 원하는 DOM 노드를 찾아 핸들러를 등록해 인터페이스를 초기화할 때
            load – 이미지 사이즈를 확인할 때 등. 외부 자원이 로드된 후이기 때문에 스타일이 적용된 상태이므로 화면에 뿌려지는 요소의 실제 크기를 확인할 수 있음
            beforeunload – 사용자가 사이트를 떠나려 할 때, 변경되지 않은 사항들을 저장했는지 확인시켜줄 때
            unload – 사용자가 진짜 떠나기 전에 사용자 분석 정보를 담은 통계자료를 전송하고자 할 때
        */
    </script>
</body>
</html>